# goflow2-prom-exporter test

The test input `test_input_flow_samples_proto.bin` was generated by sending 20 sFlow packets to goflow2:

    ./goflow2 -listen 'sflow://:6344?count=2' -transport.file.sep= -format=bin > test_input_flow_samples_proto.bin

The [integration test](./goflow2_prom_exporter_test.go) pipes the test input into the exporter:

    cat test_input_flow_samples_proto.bin | /goflow2-prom-exporter -addr :8080

The test then fetches the metrics from the exporter, and compares them to [./expected_metrics.prom](./expected_metrics.prom).


## Build test

    docker build . -t test-sflow-exporter

## Run test

    docker run -it --rm test-sflow-exporter